import{o as y,P as A,w as C,t as $,R as E,a as b,u as M}from"./dom.b01be108.js";import{a as W,f as D,N as F,t as q,m as G,P as T,M as m}from"./micro-task.926e0e8e.js";import{b as U}from"./use-resolve-button-type.38ab832e.js";import{d as S,r as g,a3 as O,c as x,O as z,P as H,F as K,x as j,a1 as B,Q}from"./index.ddf2ada6.js";let J=S({props:{onFocus:{type:Function,required:!0}},setup(t){let s=g(!0);return()=>s.value?O(D,{as:"button",type:"button",features:W.Focusable,onFocus(i){i.preventDefault();let u,e=50;function o(){var l;if(e--<=0){u&&cancelAnimationFrame(u);return}if((l=t.onFocus)!=null&&l.call(t)){s.value=!1,cancelAnimationFrame(u);return}u=requestAnimationFrame(o)}u=requestAnimationFrame(o)}}):null}}),L=Symbol("TabsContext");function w(t){let s=Q(L,null);if(s===null){let i=new Error(`<${t} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,w),i}return s}let _=S({name:"TabGroup",emits:{change:t=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:s,attrs:i,emit:u}){let e=g(null),o=g([]),l=g([]),c=x(()=>t.selectedIndex!==null),v=x(()=>c.value?t.selectedIndex:e.value),p={selectedIndex:e,orientation:x(()=>t.vertical?"vertical":"horizontal"),activation:x(()=>t.manual?"manual":"auto"),tabs:o,panels:l,setSelectedIndex(r){v.value!==r&&u("change",r),c.value||(e.value=r)},registerTab(r){o.value.includes(r)||o.value.push(r)},unregisterTab(r){let n=o.value.indexOf(r);n!==-1&&o.value.splice(n,1)},registerPanel(r){l.value.includes(r)||l.value.push(r)},unregisterPanel(r){let n=l.value.indexOf(r);n!==-1&&l.value.splice(n,1)}};return z(L,p),H(()=>{var r;if(p.tabs.value.length<=0||t.selectedIndex===null&&e.value!==null)return;let n=p.tabs.value.map(P=>y(P)).filter(Boolean),f=n.filter(P=>!P.hasAttribute("disabled")),h=(r=t.selectedIndex)!=null?r:t.defaultIndex;if(h<0)e.value=n.indexOf(f[0]);else if(h>p.tabs.value.length)e.value=n.indexOf(f[f.length-1]);else{let P=n.slice(0,h),a=[...n.slice(h),...P].find(d=>f.includes(d));if(!a)return;e.value=n.indexOf(a)}}),()=>{let r={selectedIndex:e.value};return O(K,[o.value.length<=0&&O(J,{onFocus:()=>{for(let n of o.value){let f=y(n);if((f==null?void 0:f.tabIndex)===0)return f.focus(),!0}return!1}}),A({theirProps:{...i,...C(t,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:r,slots:s,attrs:i,name:"TabGroup"})])}}}),ee=S({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(t,{attrs:s,slots:i}){let u=w("TabList");return()=>{let e={selectedIndex:u.selectedIndex.value},o={role:"tablist","aria-orientation":u.orientation.value};return A({ourProps:o,theirProps:t,slot:e,attrs:s,slots:i,name:"TabList"})}}}),te=S({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1}},setup(t,{attrs:s,slots:i,expose:u}){let e=w("Tab"),o=`headlessui-tabs-tab-${$()}`,l=g(null);u({el:l,$el:l}),j(()=>e.registerTab(l)),B(()=>e.unregisterTab(l));let c=x(()=>e.tabs.value.indexOf(l)),v=x(()=>c.value===e.selectedIndex.value);function p(a){var d;let I=a();if(I===F.Success&&e.activation.value==="auto"){let N=(d=G(l))==null?void 0:d.activeElement,k=e.tabs.value.findIndex(R=>y(R)===N);k!==-1&&e.setSelectedIndex(k)}return I}function r(a){let d=e.tabs.value.map(I=>y(I)).filter(Boolean);if(a.key===b.Space||a.key===b.Enter){a.preventDefault(),a.stopPropagation(),e.setSelectedIndex(c.value);return}switch(a.key){case b.Home:case b.PageUp:return a.preventDefault(),a.stopPropagation(),p(()=>T(d,m.First));case b.End:case b.PageDown:return a.preventDefault(),a.stopPropagation(),p(()=>T(d,m.Last))}if(p(()=>M(e.orientation.value,{vertical(){return a.key===b.ArrowUp?T(d,m.Previous|m.WrapAround):a.key===b.ArrowDown?T(d,m.Next|m.WrapAround):F.Error},horizontal(){return a.key===b.ArrowLeft?T(d,m.Previous|m.WrapAround):a.key===b.ArrowRight?T(d,m.Next|m.WrapAround):F.Error}}))===F.Success)return a.preventDefault()}let n=g(!1);function f(){var a;n.value||(n.value=!0,!t.disabled&&((a=y(l))==null||a.focus(),e.setSelectedIndex(c.value),q(()=>{n.value=!1})))}function h(a){a.preventDefault()}let P=U(x(()=>({as:t.as,type:s.type})),l);return()=>{var a;let d={selected:v.value},I={ref:l,onKeydown:r,onMousedown:h,onClick:f,id:o,role:"tab",type:P.value,"aria-controls":(a=y(e.panels.value[c.value]))==null?void 0:a.id,"aria-selected":v.value,tabIndex:v.value?0:-1,disabled:t.disabled?!0:void 0};return A({ourProps:I,theirProps:t,slot:d,attrs:s,slots:i,name:"Tab"})}}}),ae=S({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:s,attrs:i}){let u=w("TabPanels");return()=>{let e={selectedIndex:u.selectedIndex.value};return A({theirProps:t,ourProps:{},slot:e,attrs:i,slots:s,name:"TabPanels"})}}}),le=S({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(t,{attrs:s,slots:i,expose:u}){let e=w("TabPanel"),o=`headlessui-tabs-panel-${$()}`,l=g(null);u({el:l,$el:l}),j(()=>e.registerPanel(l)),B(()=>e.unregisterPanel(l));let c=x(()=>e.panels.value.indexOf(l)),v=x(()=>c.value===e.selectedIndex.value);return()=>{var p;let r={selected:v.value},n={ref:l,id:o,role:"tabpanel","aria-labelledby":(p=y(e.tabs.value[c.value]))==null?void 0:p.id,tabIndex:v.value?0:-1};return!v.value&&t.unmount&&!t.static?O(D,{as:"span",...n}):A({ourProps:n,theirProps:t,slot:r,attrs:s,slots:i,features:E.Static|E.RenderStrategy,visible:v.value,name:"TabPanel"})}}});export{le as c,te as d,ae as f,_ as o,ee as s};
